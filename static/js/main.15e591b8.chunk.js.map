{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["transformer","Transformer","Control","children","onClick","className","Controls","markMapRef","svgElementRef","onZoom","multiplier","current","rescale","svgTextWithAttribute","outerHTML","replace","svgFileText","element","document","createElement","setAttribute","btoa","body","appendChild","click","removeChild","Mindmap","value","useEffect","colorFn","Markmap","create","duration","color","d3","node","d","toString","nodeMinHeight","spacingVertical","spacingHorizontal","paddingX","nodeFont","markMap","root","transform","setData","fit","ref","Sidebar","onChange","textAreaRef","useRef","open","onToggle","e","target","focus","App","valueFromParams","URLSearchParams","location","search","get","decodedValueFromParams","atob","useState","setValue","newValue","searchParams","set","newRelativePathQuery","window","pathname","history","pushState","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.15e591b8.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { INode } from 'markmap-common';\nimport { Transformer } from 'markmap-lib';\nimport { Markmap } from 'markmap-view';\nimport './App.css';\n\nconst transformer = new Transformer();\nconst initValue = `# Title\n\n- one\n- two\n- third item\n  - fourth item\n    second line\n  - five\n    - six\n\n`;\n\nfunction Control({ children, onClick }: { children: React.ReactChild | React.ReactChild[], onClick: any }) {\n  return <button onClick={onClick} className=\"controls__button\">{children}</button>\n}\n\nfunction Controls({ markMapRef, svgElementRef }: { markMapRef: React.MutableRefObject<Markmap | null>, svgElementRef: React.MutableRefObject<SVGSVGElement | null> }) {\n\n  const onZoom = (multiplier: number) => () => {\n    if (markMapRef.current) {\n      markMapRef.current.rescale(1 * multiplier)\n    }\n  }\n\n  const exportClick = () => {\n    const svgText = svgElementRef?.current?.outerHTML || \"\";\n    const svgTextWithAttribute = svgText.replace('<svg ', '<svg xmlns=\"http://www.w3.org/2000/svg\" ').replace('<br>', '<br></br>');\n    const svgFileText = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>${svgTextWithAttribute}`;\n\n    const element = document.createElement('a');\n    element.setAttribute('href', 'data:image/svg;base64,' + btoa(svgFileText));\n    element.setAttribute('download', 'mindmap.svg');\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  return <ul className=\"controls\">\n    <li><Control onClick={onZoom(1.2)}>+</Control></li>\n    <li><Control onClick={onZoom(0.8)}>-</Control></li>\n    <li><Control onClick={exportClick}>Export</Control></li>\n  </ul>\n}\n\nfunction Mindmap({ value, markMapRef, svgElementRef }: { value: string, markMapRef: React.MutableRefObject<Markmap | null>, svgElementRef: React.MutableRefObject<SVGSVGElement | null> }) {\n  useEffect(() => {\n    if (markMapRef.current) return;\n    if (!svgElementRef.current) return;\n\n    markMapRef.current = Markmap.create(svgElementRef.current, {\n      duration: 0,\n      color: (\n        (colorFn) =>\n          (node: INode): string =>\n            colorFn(node.d!.toString())\n      )(d3.scaleOrdinal([\"#4c28cf\", \"#0e52ec\", \"#ea13b1\", \"#2ec9c2\", \"#0fd991\", \"#d90f32\", \"#f2c317\", \"#377eb8\", \"#4daf4a\", \"#984ea3\", \"#ff7f00\", \"#ffff33\", \"#a65628\", \"#f781bf\", \"#999999\"])),\n      nodeMinHeight: 20,\n      spacingVertical: 8,\n      spacingHorizontal: 24,\n      paddingX: 8,\n      nodeFont: `400 10px/12px -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif`\n    });\n  }, []);\n\n  useEffect(() => {\n    const markMap = markMapRef.current;\n    if (markMap) {\n      const { root } = transformer.transform(value);\n      markMap.setData(root);\n      markMap.fit();\n    }\n\n  }, [value]);\n\n  return (\n    <svg className=\"mindmap\" ref={svgElementRef} />\n  );\n}\n\nfunction Sidebar({ value, onChange }: { value: string, onChange: any }) {\n  const textAreaRef = useRef<HTMLTextAreaElement>(null);\n\n  const handleChange = (e: any) => {\n    onChange(e.target.value);\n  };\n\n  const handleToggle = (e: any) => {\n    if (e.target.open && textAreaRef.current) {\n      textAreaRef.current.focus();\n    }\n  };\n\n  return (\n    <details className=\"sidebar\" open onToggle={handleToggle}>\n      <textarea\n        ref={textAreaRef}\n        className=\"\"\n        value={value}\n        onChange={handleChange}\n      />\n\n      <summary><b className=\"summary-text\">&#10095;</b></summary>\n    </details>\n  )\n}\n\n\nfunction App() {\n  const valueFromParams = new URLSearchParams(document.location.search).get('input');\n  const decodedValueFromParams = valueFromParams && atob(valueFromParams);\n  const [value, setValue] = useState(decodedValueFromParams || initValue);\n\n\n  const markMapRef = useRef<Markmap | null>(null);\n  const svgElementRef = useRef<SVGSVGElement | null>(null);\n\n  const updateWithNewValue = (newValue: string) => {\n    const searchParams = new URLSearchParams(document.location.search);\n    searchParams.set(\"input\", btoa(newValue));\n    var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n    window.history.pushState(null, '', newRelativePathQuery);\n    setValue(newValue);\n  }\n\n  return (<>\n    <Sidebar value={value} onChange={updateWithNewValue} />\n    <Mindmap value={value} markMapRef={markMapRef} svgElementRef={svgElementRef} />\n    <Controls markMapRef={markMapRef} svgElementRef={svgElementRef} />\n  </>)\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}